# Utility Functions
loadCredentials() {
  ual tss load-credentials;
}

getPasswordOnlyNppid() {
  ual tss get-password --nppid;
}

getPasswordOnlyPpid() {
  ual tss get-password --ppid;
}

loginOneShotDev() {
  ual aws auth --nppid --role DEV-N4C_CWD-L3;
  getPasswordOnlyNppid;
}

loginOneShotQa() {
  ual aws auth --nppid --role ADFS-QA-N4C_CWD-L4;
  getPasswordOnlyNppid;
}

loginOneShotStg() {
  ual aws auth --ppid;
  getPasswordOnlyPpid;
}


devEnv() {
read -p "Get password only y/n? " resp
  case "$resp" in
    y) getPasswordOnlyNppid;;
    n) loginOneShotDev;;
  esac
}

qaEnv() {
read -p "Get password only y/n? " resp
  case "$resp" in
    y) getPasswordOnlyNppid;;
    n) loginOneShotQa;;
  esac
}


stgEnv() {
read -p "Get password only y/n? " resp
  case "$resp" in
    y) getPasswordOnlyPpid;;
    n) loginOneShotHigherEnv;;
  esac
}

execute() {
loadCredentials;
read -p "Select `echo $'\n> '` [ 1 ] dev `echo $'\n> '` [ 2 ] qa `echo $'\n> '` [ 3 ] stg `echo $'\n>> '` " envResp
  case "$envResp" in
    1) devEnv;;
    2) qaEnv;;
    3) stgEnv;;
  esac
}

execute;

