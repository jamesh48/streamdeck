
/*---
/js/bs/buildProblems.js
---*/
(function(a){BS.BuildProblems={toggleDetails:function(b){a(BS.Util.escapeId(b+"_details")).toggle();a(BS.Util.escapeId(b+"_problem")).toggleClass("handle_expanded handle_collapsed");return false;},expandGroups:function(b){BS.BuildProblems.expandCollapseGroups(b,true);},collapseGroups:function(b){BS.BuildProblems.expandCollapseGroups(b,false);},expandCollapseGroups:function(c,b){if(b){BS.CollapsableBlocks.expandAll(true,"problemsAll");}else{BS.CollapsableBlocks.collapseAll(true,"problemsAll");}a(c).parent("div.expandCollapseActions").next("div.expandCollapseContainer").find(b?".handle_collapsed":".handle_expanded").each(function(){var d=a(this);if(d.hasClass("bp")){BS.BuildProblems.toggleDetails(this.id.replace(/_problem/,""));}});return false;},updateSnapshotDependencyDescription:function(g,d){var b=$j("#descriptionContainer_"+g);var l=$j("#bpd_"+g);var h=b.html();var j=$j(d);var e=h.indexOf('"');var c=h.indexOf('"',e+1);if(e>-1&&c>-1){var f=h.substring(0,e);var k=f.indexOf("Snapshot dependency failure");var i=f.indexOf("Snapshot dependency",k+1);if(k>-1&&i>-1){f="Snapshot dependency ";}b.html(f+h.substring(c+2));}l.html(l.html()+$j(d).html());j.html("");},updateSnapshotDependencyCompactDescription:function(f,d){var e=$j("#descriptionContainer_"+f);var c=$j("#problemLink_"+f);var b=$j(d);var g="";if($j(e).hasClass("singleNode")){g="Snapshot dependency failure: ";}if(!$j(c).length){e.html(g+b.html());}else{c.html(g+b.html());}},addDetailsSectionSupport:function(d){var b=this;var f="#descriptionContainer_"+d;$j(f).addClass("hasDetails");$j(f).find("a").contents().unwrap();var e=$j(f).parents(".tcRow");e.addClass("hasDetails");e.find(".tcCell:not(.rightSideActions)").off("click");e.find(".tcCell:not(.rightSideActions)").on("click",function(){b.toggleDetailsSection(d);});var c=$j(location).attr("hash");if(c!=undefined&&"#"+d+"_problem"==c){b.expandDetailsSection(f);}},expandDetailsSection:function(b){var d="#descriptionContainer_"+b;var c="#detailsWrapper_"+b;$j(d).addClass("expanded");$j(d).parents(".tcRow").addClass("expanded");$j(c).addClass("expanded");$j(d).trigger("problemExpanded");},toggleDetailsSection:function(b){var d="#descriptionContainer_"+b;var c="#detailsWrapper_"+b;$j(d).toggleClass("expanded");$j(d).parents(".tcRow").toggleClass("expanded");$j(c).toggleClass("expanded");if($j(c).hasClass("expanded")){BS.BuildResults.stacktraceShown();$j(d).trigger("problemExpanded");}else{BS.BuildResults.stacktraceHidden();}return false;},focusBuildProblem:function(c){var b=$j(".descriptionContainer[data-id="+c+"]");var d=$j(".detailsWrapper[data-id="+c+"]");if(b.length>0&&d.length>0){b.addClass("expanded");b.parents(".tcRow").addClass("expanded");d.addClass("expanded");$j(window).scrollTop(d.position().top-20);$j(b).trigger("problemExpanded");}},shortenLongDescription:function(g){var h=g.html();var c=$j(window).width()-g.offset().left-50;var d=g.width();var f=g.html().lastIndexOf(" ");var b="";while(d>c&&f>-1){b+=g.html().substring(f);g.html(g.html().substring(0,f));d=g.width();f=g.html().lastIndexOf(" ");}if(b.length>0){var e=document.createElement("span");e.className="descriptionContainer__ellipsis";e.textContent=" ...";e.onmouseover=function(){BS.Tooltip.showMessage(this,{},h);};e.onmouseout=function(){BS.Tooltip.hidePopup();};g.append(e);}}};a(document).on("mouseover mouseout",".bpl .problemToHighlight",function(){var b=a(this);var c=a(".problemToHighlight.problem"+b.data("id"));if(c.length>1){c.toggleClass("highlighted");}return true;});a(document).on("click",".bpl .problemToHighlight",function(){var b=a(this);var c=a(".problemToHighlight.problem"+b.data("id"));if(c.length>1){c.toggleClass("stickyHighlighted");}return true;});})(jQuery);