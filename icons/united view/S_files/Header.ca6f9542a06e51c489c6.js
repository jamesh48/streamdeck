(window.webpackJsonpTeamCityAPI=window.webpackJsonpTeamCityAPI||[]).push([[229,251,274,393,395],{1:function(e,t){},"4jqi":function(e,t,r){"use strict";r.d(t,"a",(function(){return O}));r("U00V");var s=r("oYCi"),o=r("OvAC"),n=r.n(o),i=r("RiSW"),a=r.n(i),c=(r("mXGw"),r("W0B4")),l=r.n(c),h=r("5x67"),u=r("O40u");function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){n()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const g=h.a.propTypes||{},{children:b}=g,f=a()(g,["children"]);class O extends h.a{constructor(...e){super(...e),n()(this,"onSelect",(e,t)=>{this.props.closeOnSelect&&this._onCloseAttempt(t),this.props.onSelect(e,t)}),n()(this,"listRef",e=>{this.list=e})}getInternalContent(){const e=this.props,{className:t}=e,r=a()(e,["className"]);return Object(s.jsx)("div",{children:Object(s.jsx)(u.b,p(p({ref:this.listRef},r),{},{maxHeight:this.popup&&this.popup.style.maxHeight,shortcuts:this.shouldUseShortcuts(),onSelect:this.onSelect}))})}}n()(O,"isItemType",u.b.isItemType),n()(O,"ListProps",u.b.ListProps),n()(O,"propTypes",p(p(p({},f),u.b.propTypes),{},{closeOnSelect:l.a.bool})),n()(O,"defaultProps",p(p(p({},u.b.defaultProps),h.a.defaultProps),{},{renderOptimization:!1,closeOnSelect:!1}));const{ListProps:j}=u.b},"8x5e":function(e,t,r){"use strict";r.r(t);var s=r("oYCi"),o=r("OvAC"),n=r.n(o),i=r("RiSW"),a=r.n(i),c=r("mXGw"),l=r("W0B4"),h=r.n(l),u=r("8Jek"),d=r.n(u),p=r("rl17"),g=r("XrUP"),b=r("9LZH"),f={unit:"8px",resetButton:"global__resetButton--1c",height:"64px",compensate:"3px",compensated:"61px",light:"header__light--31",dark:"header__dark--1Z",header:"header__header--sY",headerSpaced:"header__headerSpaced--2P",logo:"header__logo--Sb",tray:"header__tray--x7",trayItemContent:"header__trayItemContent--3n",icon:"header__icon--b4",main:"header__main--WN",rotatable:"header__rotatable--de",rotated:"header__rotated--Pk",profileEmpty:"header__profileEmpty--3C",profile:"header__profile--3U header__profileEmpty--3C",avatarWrapper:"header__avatarWrapper--1o global__resetButton--1c",hasUpdates:"header__hasUpdates--1M"},O=r("29qe");function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){n()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}class w extends c.PureComponent{render(){const e=this.props,{className:t}=e,r=a()(e,["className"]),o=d()(f.logo,t);return Object(s.jsx)("div",{className:o,children:Object(s.jsx)(O.b,m({},r))})}}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){n()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}n()(w,"propTypes",{className:h.a.string}),n()(w,"defaultProps",{size:O.a.Size48,suppressSizeWarning:!0}),n()(w,"Size",O.a);const v=e=>e&&Object(s.jsx)("div",{className:f.trayItem,children:e});class P extends c.Component{render(){const e=this.props,{children:t,className:r}=e,o=a()(e,["children","className"]),n=d()(f.tray,r);return Object(s.jsx)("div",_(_({},o),{},{className:n,children:c.Children.map(t,v)}))}}n()(P,"propTypes",{className:h.a.string,children:h.a.node});var k=r("q5+j");function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){n()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}class x extends c.Component{render(){const e=this.props,{className:t,rotatable:r}=e,o=a()(e,["className","rotatable"]),n=d()(f.icon,t,{[f.rotatable]:r,[f.rotated]:r&&o.active});return Object(s.jsx)(k.a,S(S({},o),{},{className:n}))}}n()(x,"propTypes",S(S({},k.a.propTypes),{},{icon:h.a.oneOfType([h.a.string,h.a.elementType]).isRequired,rotatable:h.a.bool})),n()(x,"defaultProps",S({},k.a.defaultProps));var E=r("2dyW"),U=r("HH6h"),T=r("4jqi");function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){n()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const D=T.a.ListProps.Type.LINK;class I extends c.PureComponent{render(){const e=this.props,{className:t,closeOnSelect:r,hasUpdates:o,onLogout:n,user:i,profileUrl:c,LinkComponent:l,onSwitchUser:h,renderPopupItems:u,onRevertPostponement:p,showApplyChangedUser:g,showLogIn:b,showLogOut:O,showSwitchUser:j,renderGuest:m,translations:w,size:y,round:_,loading:v,onLogin:P}=e,k=a()(e,["className","closeOnSelect","hasUpdates","onLogout","user","profileUrl","LinkComponent","onSwitchUser","renderPopupItems","onRevertPostponement","showApplyChangedUser","showLogIn","showLogOut","showSwitchUser","renderGuest","translations","size","round","loading","onLogin"]);if(!i)return Object(s.jsx)("div",L(L({},k),{},{className:d()(f.profileEmpty,t),children:Object(s.jsx)(E.b,{size:y,round:_})}));if(i.guest)return m(this.props);const C=d()(f.avatarWrapper,{[f.hasUpdates]:o}),S=Object(s.jsx)("button",{type:"button",className:C,children:Object(s.jsx)(E.b,{url:i.profile&&i.profile.avatar&&i.profile.avatar.url,size:y,round:_})}),x=[g&&{rgItemType:D,label:w.applyChangedUser||"Apply changed user",className:f.profileMenuItem,onClick:p},b&&{rgItemType:D,label:w.login||"Log in",className:f.profileMenuItem,onClick:p},{rgItemType:T.a.ListProps.Type.LINK,label:w.profile||"Profile",target:"_self",href:c,LinkComponent:l},j&&{rgItemType:D,label:w.switchUser||"Switch user",className:f.profileMenuItem,onClick:h},O&&{rgItemType:D,label:w.logout||"Log out",onClick:n}].filter(e=>!!e);return Object(s.jsx)(U.b,L(L({},k),{},{title:i.name,anchor:S,"data-test":"ring-profile",className:d()(f.profile,t),children:Object(s.jsx)(T.a,{closeOnSelect:r,data:u(x),left:-2,top:-8,sidePadding:32})}))}}n()(I,"propTypes",{className:h.a.string,closeOnSelect:h.a.bool,hasUpdates:h.a.bool,loading:h.a.bool,onLogin:h.a.func,onLogout:h.a.func,onSwitchUser:h.a.func,profileUrl:h.a.string,renderPopupItems:h.a.func,LinkComponent:h.a.oneOfType([h.a.instanceOf(c.Component),h.a.func,h.a.string]),translations:h.a.shape({profile:h.a.string,login:h.a.string,logout:h.a.string,applyChangedUser:h.a.string,switchUser:h.a.string}),user:h.a.shape({guest:h.a.bool,profile:h.a.object,name:h.a.string}),size:h.a.number,round:h.a.bool,showLogIn:h.a.bool,showLogOut:h.a.bool,showSwitchUser:h.a.bool,showApplyChangedUser:h.a.bool,onRevertPostponement:h.a.func,renderGuest:h.a.func}),n()(I,"defaultProps",{closeOnSelect:!0,renderPopupItems:e=>e,translations:{},size:E.a.Size32,renderGuest:({loading:e,onLogin:t,className:r,translations:o})=>Object(s.jsx)("div",{className:d()(f.profileEmpty,r),children:Object(s.jsx)(k.a,{primary:!0,"data-test":"ring-header-login-button",disabled:e,loader:e,onClick:t,children:o.login||"Log in..."})})}),n()(I,"Size",E.a);r("FdtR"),r("U00V");var N=r("psGZ");r("9UJh"),r("y89P");function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var B=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";R(this,t);var r=F(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object.defineProperty(r,"message",{configurable:!0,enumerable:!1,value:e,writable:!0}),Object.defineProperty(r,"name",{configurable:!0,enumerable:!1,value:r.constructor.name,writable:!0}),Error.hasOwnProperty("captureStackTrace")?(Error.captureStackTrace(r,r.constructor),F(r)):(Object.defineProperty(r,"stack",{configurable:!0,enumerable:!1,value:new Error(e).stack,writable:!0}),r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(function(e){function t(){e.apply(this,arguments)}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Error)),M=r("jP3q");class q{constructor(){this._authResponse=this.readAuthResponseFromURL()}static convertKey(e){return e.replace(/_([a-z])/g,(e,t)=>t.toUpperCase())}getAuthResponseFromURL(){return this.validateAuthResponse(this._authResponse)}validateAuthResponse(e){if(e.error)throw new q.AuthError(e);return e.accessToken?e:null}readAuthResponseFromURL(){const e={},t=Object(M.f)(this.getHash());return Object.keys(t).forEach(r=>{-1===r.indexOf("_")?e[r]=t[r]:e[q.convertKey(r)]=t[r]}),e}getHash(){const e=this.getLocation();return e&&e.replace(/^[^#]*#?/,"")}getLocation(){return window.location.toString()}}n()(q,"AuthError",class extends B{constructor(e={}){super(e.errorDescription),this.code=e.error,this.uri=e.errorUri,this.stateId=e.state}});const z="edge"===N.a.browser.name;var H=r("qLNU"),K=r("q3fm"),W=r("fO27"),G="group__group--1I";function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function J(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(Object(r),!0).forEach((function(t){n()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}class Y extends c.Component{render(){const e=this.props,{children:t,className:r}=e,o=a()(e,["children","className"]),n=d()(G,r);return Object(s.jsx)("span",J(J({},o),{},{className:n,children:t}))}}n()(Y,"propTypes",{children:h.a.node,className:h.a.string});var Q="down-notification__title--2r",Z="down-notification__error--2F";let X=null;function $(e,t=K.c.Type.WARNING){const r=H.a.showingAlerts.filter(e=>e.key===X)[0];r?(r.message=e,r.type=t,H.a.renderAlerts()):X=H.a.addAlert(e,t,0,{closeable:!1})}function ee({translations:e,onCheckAgain:t}){const{backendIsNotAvailable:r,checkAgain:o,errorMessage:n}=e;return Object(s.jsxs)("div",{"data-test":"ring-backend-down-notification",children:[Object(s.jsx)(Y,{children:Object(s.jsx)("div",{className:Q,children:r})}),Object(s.jsxs)("span",{className:Z,children:[n," "]}),Object(s.jsx)(W.a,{onClick:t,"data-test":"check-again",children:o})]})}ee.propTypes={translations:h.a.shape({backendIsNotAvailable:h.a.string,checkAgain:h.a.string,errorMessage:h.a.string}),onCheckAgain:h.a.func};r("4NM0"),r("X5mX"),r("aZFp");class te{constructor(){this.removeAll()}trigger(e,t){const r=this._all.get(e);return r?Promise.all([...r].map(e=>e(t))):Promise.resolve([])}add(e,t){let r=this._all.get(e);r||(r=new Set,this._all.set(e,r)),r.add(t)}remove(e,t){const r=this._all.get(e);r&&r.delete(t)}removeAll(){this._all=new Map}}function re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function se(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?re(Object(r),!0).forEach((function(t){n()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):re(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const oe={headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"same-origin"};class ne extends B{constructor(e,t={}){super("".concat(e.status," ").concat(e.statusText||"")),this.data=t,this.status=e.status}}const ie=401;class ae{constructor(e,t,r={}){n()(this,"baseUrl",null),n()(this,"_requestsMeta",new WeakMap),n()(this,"setAuth",e=>{this.requestToken=()=>e.requestToken(),this.shouldRefreshToken=e.constructor.shouldRefreshToken,this.forceTokenUpdate=()=>e.forceTokenUpdate()}),n()(this,"setBaseUrl",e=>{this.baseUrl=e}),n()(this,"fetch",async(e,t={})=>{const{body:r,query:s={}}=t,o=a()(t,["body","query"]),n=await this._fetch(this._makeRequestUrl(e,s),se(se({},o),{},{body:r?JSON.stringify(r):r}));return this._processResponse(n)}),n()(this,"request",async(e,t)=>{let r=await this.requestToken(),s=await this._performRequest(e,r,t);try{return await this._processResponse(s)}catch(o){if(!(o instanceof ne))throw o;if(void 0!==o.data.error&&this.shouldRefreshToken(o.data.error))return r=await this.forceTokenUpdate(),s=await this._performRequest(e,r,t),this._processResponse(s);throw o}}),n()(this,"getMetaForResponse",e=>this._requestsMeta.get(e)),n()(this,"get",(e,t)=>this.request(e,se({method:"GET"},t))),n()(this,"post",(e,t)=>this.request(e,se({method:"POST"},t))),e&&this.setAuth(e),this.setBaseUrl(t);const{headers:s}=oe,o=a()(oe,["headers"]);this.fetchConfig=se(se(se({},o),r),{},{headers:se(se({},s),r.headers)})}_fetch(...e){return fetch(...e)}_makeRequestUrl(e,t){const r=Object(M.a)(e,t);return Object(M.e)(this.baseUrl,r)}_performRequest(e,t,r={}){const{headers:s,body:o,query:n={},sendRawBody:i}=r,c=a()(r,["headers","body","query","sendRawBody"]),l=se(se(se({},this.fetchConfig.headers),t?{Authorization:"".concat("Bearer"," ").concat(t)}:{}),s);return Object.keys(l).forEach(e=>{null!==l[e]&&void 0!==l[e]||Reflect.deleteProperty(l,e)}),this._fetch(this._makeRequestUrl(e,n),se(se(se({},this.fetchConfig),{},{headers:l},c),{},{body:o&&!i?JSON.stringify(o):o}))}_storeRequestMeta(e,t){const{headers:r,ok:s,redirected:o,status:n,statusText:i,type:a,url:c}=t;this._requestsMeta.set(e,{headers:r,ok:s,redirected:o,status:n,statusText:i,type:a,url:c})}async _processResponse(e){const t=e.headers.get("content-type"),r=t&&-1!==t.indexOf("application/json");if(ae._isErrorStatus(e.status)){let t;try{t=await(r?e.json():e.text())}catch(e){}throw new ne(e,t)}try{const t=await(r?e.json():{data:await e.text()});return this._storeRequestMeta(t,e),t}catch(t){return e}}static _isErrorStatus(e){return e<200||e>=300}async authorizedFetch(...e){const t=await this._performRequest(...e);return this._processResponse(t)}}function ce(e,t,{error:r}){return new Promise((s,o)=>{setTimeout(()=>o(r||new Error("Timeout")),t),e.then(s,o)})}r("x3Br");var le=r("ctSH"),he=r.n(le);class ue{static _createCookie(e,t,r){let s,o;r?(s=new Date,s.setTime(s.getTime()+864e5*r),o="; expires=".concat(s.toGMTString())):o=";",document.cookie="".concat(e,"=").concat(t).concat(o,"; path=/")}static _readCookie(e){const t="".concat(e,"="),r=document.cookie.split(";");let s;for(let e=0;e<r.length;e++){for(s=r[e];" "===s.charAt(0);)s=s.substring(1,s.length);if(0===s.indexOf(t))return s.substring(t.length,s.length)}}constructor(e={}){const t="session"===e.type;this.cookieName=e.cookieName||(t?this.constructor.DEFAULT_SESSION_COOKIE_NAME:this.constructor.DEFAULT_COOKIE_NAME),this.checkDelay=e.checkDelay||this.constructor.DEFAULT_CHECK_DELAY,this.expires=t?this.constructor.COOKIE_EXPIRES:null}_read(){return new Promise(e=>{const t=ue._readCookie(this.cookieName);e(JSON.parse(decodeURIComponent(t)))}).catch(()=>({}))}_write(e){return new Promise(t=>{const r=encodeURIComponent(JSON.stringify(e));return ue._createCookie(this.cookieName,"{}"===r?"":r,this.expires),t(e)})}get(e){return this._read().then(t=>t[e]||null)}set(e,t){return this._read().then(r=>(e&&(null!=t?r[e]=t:Reflect.deleteProperty(r,e)),this._write(r)))}remove(e){return this.set(e,null)}each(e){return"function"!=typeof e?Promise.reject(new Error("Callback is not a function")):this._read().then(t=>{const r=[];for(const s in t)t.hasOwnProperty(s)&&r.push(e(s,t[s]));return Promise.all(r)})}on(e,t){let r=!1;const s=o=>{this.get(e).then(e=>{r||(he()(o,e)||t(e),window.setTimeout(()=>s(o),this.checkDelay))})};return this.get(e).then(s),()=>{r=!0}}}n()(ue,"DEFAULT_COOKIE_NAME","localStorage"),n()(ue,"DEFAULT_SESSION_COOKIE_NAME","sessionStorage"),n()(ue,"DEFAULT_CHECK_DELAY",3e3),n()(ue,"COOKIE_EXPIRES",365),n()(ue,"QUOTA",4093);let de=class{static async safePromise(e){try{return await new Promise(e)}catch(e){throw e&&"NS_ERROR_FILE_CORRUPTED"===e.name&&H.a.error('Sorry, it looks like your browser storage is corrupted. Please clear your storage by going to Tools -> Clear Recent History -> Cookies and setting time range to "Everything". This will remove the corrupted browser storage across all sites.'),e}}constructor(e={}){this.storageType="session"===e.type?"sessionStorage":"localStorage"}get(e){return this.constructor.safePromise(t=>{const r=window[this.storageType].getItem(e);try{t(JSON.parse(r))}catch(e){t(r)}})}set(e,t){return this.constructor.safePromise(r=>{window[this.storageType].setItem(e,JSON.stringify(t)),r(t)})}remove(e){const t=this.storageType;return this.constructor.safePromise(r=>{window[t].hasOwnProperty(e)&&window[t].removeItem(e),r()})}each(e){const t=this.storageType;return this.constructor.safePromise(r=>{const s=[];for(const r in window[t])if(window[t].hasOwnProperty(r)){let o=window[t].getItem(r);try{o=JSON.parse(o)}catch(e){}s.push(Promise.resolve(e(r,o)))}r(Promise.all(s))})}on(e,t){function r(r){if(r.key===e)try{t(JSON.parse(r.newValue))}catch(e){t(r.newValue)}}return window.addEventListener("storage",r,!1),()=>window.removeEventListener("storage",r,!1)}};try{const e="testStorage";localStorage.setItem(e,e),localStorage.removeItem(e)}catch(e){de=ue}var pe=de;const ge="ie"===N.a.browser.name&&"11.0"===N.a.browser.versionString;class be{constructor(e){this.messagePrefix=e.messagePrefix||"",this.stateKeyPrefix=e.stateKeyPrefix,this.tokenKey=e.tokenKey,this.userKey=e.userKey||"user-key",this.stateTTL=e.stateTTL||864e5,this._lastMessage=null;const t=e.storage||pe;this.stateQuota=Math.min(e.stateQuota||102400,t.QUOTA||1/0),this._stateStorage=new t({cookieName:"ring-state"}),this._tokenStorage=new t({cookieName:"ring-token"}),this._messagesStorage=new t({cookieName:"ring-message"}),this._currentUserStorage=new t({cookieName:"ring-user"})}onTokenChange(e){return this._tokenStorage.on(this.tokenKey,e)}onStateChange(e,t){return this._stateStorage.on(this.stateKeyPrefix+e,t)}onMessage(e,t){return this._messagesStorage.on(this.messagePrefix+e,e=>ge&&e===this._lastMessage?null:t(e))}sendMessage(e,t=null){this._lastMessage=t,this._messagesStorage.set(this.messagePrefix+e,t)}async saveState(e,t,r){t.created=Date.now();try{await this._stateStorage.set(this.stateKeyPrefix+e,t)}catch(s){if(r)throw s;return await this.cleanStates(),this.saveState(e,t,!0)}}async cleanStates(e){const t=Date.now(),r=(await this._stateStorage.each((r,s)=>r===this.stateKeyPrefix+e?this._stateStorage.remove(r):0===r.indexOf(this.stateKeyPrefix)?s.created+this.stateTTL<t?this._stateStorage.remove(r):{key:r,created:s.created,size:JSON.stringify(s).length}:void 0)).filter(e=>e);let s=r.reduce((e,t)=>t.size+e,0);if(s>this.stateQuota){r.sort((e,t)=>e.created>t.created);const e=r.filter(e=>s>this.stateQuota&&(s-=e.size,!0)).map(e=>this._stateStorage.remove(e.key));return e.length&&Promise.all(e)}}async getState(e){try{const t=await this._stateStorage.get(this.stateKeyPrefix+e);return await this.cleanStates(e),t}catch(t){throw await this.cleanStates(e),t}}saveToken(e){return this._tokenStorage.set(this.tokenKey,e)}getToken(){return this._tokenStorage.get(this.tokenKey)}wipeToken(){return this._tokenStorage.remove(this.tokenKey)}async getCachedUser(e){const t=await this._currentUserStorage.get(this.userKey),r=()=>e().then(e=>(this._currentUserStorage.set(this.userKey,e),e));return t&&t.id?(setTimeout(r,1e3),t):r()}wipeCachedCurrentUser(){return this._currentUserStorage.remove(this.userKey)}onUserChanged(){this.wipeCachedCurrentUser()}}r("wCa+");var fe=r("RA+P"),Oe=r.n(fe);class je{constructor(e,t){this.config=e,this.storage=t}async prepareAuthRequest(e,t){const r=je._uuid(),s=this.config.scopes.map(e=>encodeURIComponent(e)),o=Object.assign({response_type:"token",state:r,redirect_uri:this.config.redirectUri,request_credentials:this.config.requestCredentials,client_id:this.config.clientId,scope:s.join(" ")},e||{}),n=Object(M.a)(this.config.authorization,o),i=Object.assign({restoreLocation:window.location.href,scopes:this.config.scopes},t||{});return await this._saveState(r,i),{url:n,stateId:r}}_saveState(e,t){return this.storage.saveState(e,t)}}n()(je,"_uuid",Oe.a.generate);class me{constructor(e,t,r){this._requestBuilder=e,this._storage=t,this._timeout=r}_createHiddenFrame(){const e=document.createElement("iframe");return e.style.border=e.style.width=e.style.height="0px",e.style.visibility="hidden",e.style.position="fixed",e.style.left="-10000px",window.document.body.appendChild(e),e}_redirectFrame(e,t){e.src="".concat(t,"&rnd=").concat(Math.random())}async _load(){const e=await this._requestBuilder.prepareAuthRequest({request_credentials:"silent"},{nonRedirect:!0});return new Promise((t,r)=>{function s(e){"HUB_AUTH_PAGE_OPENED"===e.data&&(r(new Error("Failed to obtain/refresh token in background")),l())}window.addEventListener("message",s);const o=this._createHiddenFrame();let n;const i=setTimeout(()=>{r(new Error("Failed to refresh authorization")),l()},this._timeout),a=this._storage.onTokenChange(e=>{e&&(l(),t(e.accessToken))}),c=this._storage.onStateChange(e.stateId,e=>{e&&e.error&&(l(),r(new q.AuthError(e)))});function l(){n||(n=!0,clearTimeout(i),c(),a(),window.removeEventListener("message",s),window.document.body.removeChild(o))}this._redirectFrame(o,e.url)})}authorize(){if(this._promise)return this._promise;const e=()=>{this._promise=null};return this._promise=this._load(),this._promise.then(e,e),this._promise}}class we{constructor(e,t,r){this._getUser=t,this._config=e,this._storage=r}static _epoch(){return Math.round(Date.now()/1e3)}validateTokenLocally(){return this._getValidatedToken([we._validateExistence,we._validateExpiration,this._validateScopes.bind(this)])}validateToken(){return this._getValidatedToken([we._validateExistence,we._validateExpiration,this._validateScopes.bind(this),this._validateAgainstUser.bind(this)])}static _validateExistence(e){if(!e||!e.accessToken)throw new we.TokenValidationError("Token not found")}static _validateExpiration({expires:e,lifeTime:t}){const r=t?Math.ceil(t/6):we.DEFAULT_REFRESH_BEFORE;if(e&&e<we._epoch()+r)throw new we.TokenValidationError("Token expired")}_validateScopes(e){const{scope:t,optionalScopes:r}=this._config;if(!(r?t.filter(e=>!r.includes(e)):t).every(t=>e.scopes.includes(t)))throw new we.TokenValidationError("Token doesn't match required scopes")}static shouldRefreshToken(e){return"invalid_grant"===e||"invalid_request"===e||"invalid_token"===e}async _validateAgainstUser(e){try{return await this._getUser(e.accessToken)}catch(e){let t={};try{t=await e.response.json()}catch(e){}if(e.status===ie||we.shouldRefreshToken(t.error))throw new we.TokenValidationError(t.error||e.message);throw e}}async _getValidatedToken(e){const t=await this._storage.getToken();for(let r=0;r<e.length;r++)await e[r](t);return t.accessToken}}function ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function _e(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(r),!0).forEach((function(t){n()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ye(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}n()(we,"DEFAULT_REFRESH_BEFORE",600),n()(we,"TokenValidationError",class extends B{constructor(e,t){super(e),this.cause=t,this.authRedirect=!0}});function ve(){}const Pe={cacheCurrentUser:!1,reloadOnUserChange:!0,embeddedLogin:!1,EmbeddedLoginFlow:null,clientId:"0-0-0-0-0",redirectUri:Object(M.c)(),redirect:!1,requestCredentials:"default",backgroundRefreshTimeout:null,scope:[],userFields:["guest","id","name","login","profile/avatar/url"],cleanHash:!0,onLogout:ve,onPostponeChangedUser:()=>{},onPostponeLogout:()=>{},enableBackendStatusCheck:!0,backendCheckTimeout:1e4,checkBackendIsUp:()=>Promise.resolve(null),onBackendDown:()=>{},defaultExpiresIn:2400,translations:{login:"Log in",loginTo:"Log in to %serviceName%",cancel:"Cancel",postpone:"Postpone",youHaveLoggedInAs:"You have logged in as another user: %userName%",applyChange:"Apply change",backendIsNotAvailable:"Connection lost",checkAgain:"try again",nothingHappensLink:"Click here if nothing happens",errorMessage:"There may be a problem with your network connection. Make sure that you are online and"}};class ke{constructor(e){if(n()(this,"config",{}),n()(this,"listeners",new te),n()(this,"http",null),n()(this,"_service",{}),n()(this,"_storage",null),n()(this,"_responseParser",new q),n()(this,"_requestBuilder",null),n()(this,"_backgroundFlow",null),n()(this,"_embeddedFlow",null),n()(this,"_tokenValidator",null),n()(this,"_postponed",!1),n()(this,"_backendCheckPromise",null),n()(this,"_authDialogService",void 0),!e)throw new Error("Config is required");if(null==e.serverUri)throw new Error('"serverUri" property is required');const t=["redirect_uri","request_credentials","client_id"].filter(t=>e.hasOwnProperty(t));if(0!==t.length)throw new Error("The following parameters are no longer supported: ".concat(t.join(", "),". Please change them from snake_case to camelCase."));e.userFields=e.userFields||[],this.config=_e(_e({},ke.DEFAULT_CONFIG),e);const{clientId:r,redirect:s,redirectUri:o,requestCredentials:i,scope:a}=this.config,c=this.config.serverUri.length;c>0&&"/"!==this.config.serverUri.charAt(c-1)&&(this.config.serverUri+="/"),this.config.userParams={query:{fields:[...new Set(ke.DEFAULT_CONFIG.userFields.concat(e.userFields))].join()}},a.includes(ke.DEFAULT_CONFIG.clientId)||a.push(ke.DEFAULT_CONFIG.clientId),this._storage=new be({messagePrefix:"".concat(r,"-message-"),stateKeyPrefix:"".concat(r,"-states-"),tokenKey:"".concat(r,"-token"),userKey:"".concat(r,"-user-")}),this._domainStorage=new be({messagePrefix:"domain-message-"}),this._requestBuilder=new je({authorization:this.config.serverUri+ke.API_PATH+ke.API_AUTH_PATH,clientId:r,redirect:s,redirectUri:o,requestCredentials:i,scopes:a},this._storage);let{backgroundRefreshTimeout:l}=this.config;l||(l=this.config.embeddedLogin?1e4:2e4),this._backgroundFlow=new me(this._requestBuilder,this._storage,l),this.config.EmbeddedLoginFlow&&(this._embeddedFlow=new this.config.EmbeddedLoginFlow(this._requestBuilder,this._storage,this.config.translations));const h=this.config.serverUri+ke.API_PATH,u=e.fetchCredentials?{credentials:e.fetchCredentials}:void 0;this.http=new ae(this,h,u);this._tokenValidator=new we(this.config,async e=>{const t=await this.getUser(e);return this.user=t,t},this._storage),this.config.onLogout&&this.addListener("logout",this.config.onLogout),!0===this.config.reloadOnUserChange&&this.addListener("userChange",()=>this._reloadCurrentPage()),this.addListener("logoutPostponed",()=>this._setPostponed(!0)),this.addListener("changePostponed",()=>this._setPostponed(!0)),this.addListener("userChange",()=>this._setPostponed(!1)),this.addListener("userChange",e=>e&&this._updateDomainUser(e.id)),this.config.cacheCurrentUser&&(this.addListener("logout",()=>this._storage.wipeCachedCurrentUser()),this.addListener("userChange",()=>this._storage.onUserChanged())),this._createInitDeferred(),this.setUpPreconnect(e.serverUri)}_setPostponed(e=!1){this._postponed=e}_updateDomainUser(e){this._domainStorage.sendMessage("domainUser",{userID:e,serviceID:this.config.clientId})}addListener(e,t){this.listeners.add(e,t)}removeListener(e,t){this.listeners.remove(e,t)}setAuthDialogService(e){this._authDialogService=e}setCurrentService(e){this._service=e}_createInitDeferred(){this._initDeferred={},this._initDeferred.promise=new Promise((e,t)=>{this._initDeferred.resolve=e,this._initDeferred.reject=t})}async init(){let e;this._storage.onTokenChange(e=>{!!this.user&&this.user.guest&&!e||(e?this._detectUserChange(e.accessToken):this.logout())}),this._domainStorage.onMessage("domainUser",({userID:e,serviceID:t})=>{t!==this.config.clientId&&(this.user&&e===this.user.id||this.forceTokenUpdate())});try{e=await this._checkForAuthResponse()}catch(e){return this.handleInitError(e)}if(e&&e.nonRedirect)return new Promise(ve);try{var t;await this._tokenValidator.validateToken();const r=await this._domainStorage._messagesStorage.get("domain-message-".concat("domainUser"));if(r){const{userID:e,serviceID:t}=r;t===this.config.clientId||e&&this.user.id===e||this.forceTokenUpdate()}return e||(e=await this._checkForStateRestoration()),this._initDeferred.resolve(e&&e.restoreLocation),null===(t=e)||void 0===t?void 0:t.restoreLocation}catch(e){return ke.storageIsUnavailable?(this._initDeferred.resolve(),await this.requestUser(),null):this.handleInitValidationError(e)}}async sendRedirect(e){const t=await this._requestBuilder.prepareAuthRequest();throw this._redirectCurrentPage(t.url),e}async handleInitError(e){if(e.stateId)try{const t=await this._storage.getState(e.stateId);if(t&&t.nonRedirect)return t.error=e,this._storage.saveState(e.stateId,t),new Promise(ve)}catch(e){}throw e}async handleInitValidationError(e){if(e.authRedirect&&this.config.redirect)return this.sendRedirect(e);if(e.authRedirect&&!this.config.redirect)try{return await this._backgroundFlow.authorize(),await this._tokenValidator.validateToken(),void this._initDeferred.resolve()}catch(e){return this.sendRedirect(e)}throw this._initDeferred.reject(e),e}async requestToken(){if(this._postponed)throw new Error("You should log in to be able to make requests");try{return await this._initDeferred.promise,ke.storageIsUnavailable?null:await this._tokenValidator.validateTokenLocally()}catch(e){return this.forceTokenUpdate()}}async forceTokenUpdate(){try{this._backendCheckPromise||(this._backendCheckPromise=this._checkBackendsStatusesIfEnabled()),await this._backendCheckPromise}catch(e){throw new Error("Cannot refresh token: backend is not available. Postponed by user.")}finally{this._backendCheckPromise=null}try{return await this._backgroundFlow.authorize()}catch(e){if(this._canShowDialogs())return this._showAuthDialog({nonInteractive:!0,error:e});{const e=await this._requestBuilder.prepareAuthRequest();this._redirectCurrentPage(e.url)}throw new we.TokenValidationError(e.message)}}async loadCurrentService(){if(!this._service.serviceName)try{const{serviceName:e,iconUrl:t}=await this.http.get("oauth2/interactive/login/settings?client_id=".concat(this.config.clientId))||{};this.setCurrentService({serviceImage:t,serviceName:e})}catch(e){}}getAPIPath(){return this.config.serverUri+ke.API_PATH}getUser(e){return this.config.cacheCurrentUser?this._storage.getCachedUser(()=>this.http.authorizedFetch(ke.API_PROFILE_PATH,e,this.config.userParams)):this.http.authorizedFetch(ke.API_PROFILE_PATH,e,this.config.userParams)}async requestUser(){if(this.user)return this.user;const e=await this.requestToken();if(this.user)return this.user;const t=await this.getUser(e);return this.user=t,t}async updateUser(){this._setPostponed(!1);const e=await this.requestToken();this._storage.wipeCachedCurrentUser();const t=await this.getUser(e);this.user=t,this.listeners.trigger("userChange",t)}async _detectUserChange(e){const t=this._isLoginWindowOpen;try{const r=await this.getUser(e),s=()=>{this.user=r,this.listeners.trigger("userChange",r)};if(r&&this.user&&this.user.id!==r.id){if(!this._canShowDialogs()||this.user.guest||t)return void s();if(r.guest)return void this._showAuthDialog({nonInteractive:!0});await this._showUserChangedDialog({newUser:r,onApply:s,onPostpone:()=>{this.listeners.trigger("changePostponed"),this.config.onPostponeChangedUser(this.user,r)}})}}catch(e){}}_beforeLogout(e){this._canShowDialogs()?this._showAuthDialog(e):this.logout()}_showAuthDialog({nonInteractive:e,error:t,canCancel:r}={}){const{embeddedLogin:s,onPostponeLogout:o,translations:n}=this.config,i=this.user.guest||r;this._createInitDeferred();const a=()=>{l(),h(),c()},c=this._authDialogService(_e(_e({},this._service),{},{loginCaption:n.login,loginToCaption:n.loginTo,confirmLabel:n.login,cancelLabel:i?n.cancel:n.postpone,errorMessage:t&&t.toString?t.toString():null,onConfirm:()=>{if(!0!==s)return a(),void this.logout();this._runEmbeddedLogin()},onCancel:()=>{if(this._embeddedFlow.stop(),this._storage.sendMessage(ke.CLOSE_WINDOW_MESSAGE,Date.now()),a(),!i)return this._initDeferred.resolve(),this.listeners.trigger("logoutPostponed"),void o();this.user.guest&&e?this.forceTokenUpdate():this._initDeferred.resolve()}})),l=this._storage.onTokenChange(e=>{e&&(a(),this._initDeferred.resolve())}),h=this._storage.onMessage(ke.CLOSE_WINDOW_MESSAGE,()=>this._embeddedFlow.stop())}_showUserChangedDialog({newUser:e,onApply:t,onPostpone:r}={}){const{translations:s}=this.config;this._createInitDeferred();const o=()=>{this._initDeferred.resolve(),n()},n=this._authDialogService(_e(_e({},this._service),{},{title:s.youHaveLoggedInAs.replace("%userName%",e.name),loginCaption:s.login,loginToCaption:s.loginTo,confirmLabel:s.applyChange,cancelLabel:s.postpone,onConfirm:()=>{o(),t()},onCancel:()=>{o(),r()}}))}_showBackendDownDialog(e){const{onBackendDown:t,translations:r}=this.config;let s=null;return new Promise((o,n)=>{const i=()=>{l(),window.removeEventListener("online",c),a(),this._storage.sendMessage(ke.CLOSE_BACKEND_DOWN_MESSAGE,Date.now()),this._awaitingForBackendPromise=null,clearTimeout(s)},a=this._storage.onMessage(ke.CLOSE_BACKEND_DOWN_MESSAGE,()=>{a(),i(),o()}),c=async()=>{await this._checkBackendsAreUp(),i(),o()},l=t({onCheckAgain:c,onPostpone:()=>{i(),n(new Error("Auth(@jetbrains/ring-ui): postponed by user"))},backendError:e,translations:r});window.addEventListener("online",c),s=setTimeout((function e(){navigator&&navigator.onLine&&c(),s=setTimeout(e,5e3)}),5e3)})}async logout(e){const t=_e({request_credentials:"required"},e);await this._checkBackendsStatusesIfEnabled(),await this.listeners.trigger("logout"),this._updateDomainUser(null),await this._storage.wipeToken();const r=await this._requestBuilder.prepareAuthRequest(t);this._redirectCurrentPage(r.url)}async _runEmbeddedLogin(){this._storage.sendMessage(ke.CLOSE_WINDOW_MESSAGE,Date.now());try{return this._isLoginWindowOpen=!0,await this._embeddedFlow.authorize()}catch(e){throw e}finally{this._isLoginWindowOpen=!1}}async login(){if(this.config.embeddedLogin)await this._runEmbeddedLogin();else{await this._checkBackendsStatusesIfEnabled();try{const e=await this._backgroundFlow.authorize(),t=await this.getUser(e);t.guest?this._beforeLogout():(this.user=t,this.listeners.trigger("userChange",t))}catch(e){this._beforeLogout()}}}async switchUser(){throw this.config.embeddedLogin&&await this._runEmbeddedLogin(),new Error('Auth: switchUser only supported for "embeddedLogin" mode')}async _checkForAuthResponse(){const e=this._responseParser.getAuthResponseFromURL(),{scope:t,defaultExpiresIn:r,cleanHash:s}=this.config;if(e&&s&&this.setHash(""),!e)return;const{state:o,scope:n,expiresIn:i,accessToken:a}=e,c=await(o&&this._storage.getState(o))||{},l=n?n.split(" "):c.scopes||t||[],h=i?parseInt(i,10):r,u=we._epoch()+h;return await this._storage.saveToken({accessToken:a,scopes:l,expires:u,lifeTime:h}),c}async _checkForStateRestoration(){const e=this._responseParser._authResponse;e&&this.config.cleanHash&&this.setHash("");const t=null==e?void 0:e.restoreAuthState;return await(t&&this._storage.getState(t))||{}}_checkBackendsAreUp(){const{backendCheckTimeout:e}=this.config;return Promise.all([ce(this.http.fetch("settings/public?fields=id"),e,{error:new Error("The authorization server is taking too long to respond. Please try again later.")}),this.config.checkBackendIsUp()]).catch(e=>{if(e instanceof TypeError)throw new TypeError("Could not connect to the server due to network error. Please check your connection and try again.");throw e})}async _checkBackendsStatusesIfEnabled(){if(this.config.enableBackendStatusCheck)try{await this._checkBackendsAreUp()}catch(e){await this._showBackendDownDialog(e)}}setUpPreconnect(e){const t=document.createElement("link");t.rel="preconnect",t.href=e,t.pr="1.0",t.crossorigin="use-credentials",document.head.appendChild(t)}_redirectCurrentPage(e){window.location=Object(M.b)(e)}_reloadCurrentPage(){this._redirectCurrentPage(window.location.href)}_canShowDialogs(){return this.config.embeddedLogin&&this._authDialogService}setHash(e){if(history.replaceState){const t=[window.location.pathname,window.location.search].join(""),r=e?"#".concat(e):"";history.replaceState(void 0,void 0,"".concat(t).concat(r))}else window.location.hash=e}}function Ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function Se(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(r),!0).forEach((function(t){n()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}n()(ke,"DEFAULT_CONFIG",Pe),n()(ke,"API_PATH","api/rest/"),n()(ke,"API_AUTH_PATH","oauth2/auth"),n()(ke,"API_PROFILE_PATH","users/me"),n()(ke,"CLOSE_BACKEND_DOWN_MESSAGE","backend-check-succeeded"),n()(ke,"CLOSE_WINDOW_MESSAGE","close-login-window"),n()(ke,"shouldRefreshToken",we.shouldRefreshToken),n()(ke,"storageIsUnavailable",!navigator.cookieEnabled),ke.DEFAULT_CONFIG=Se(Se({},ke.DEFAULT_CONFIG),{},{EmbeddedLoginFlow:class{constructor(e,t){n()(this,"_timeoutId",null),n()(this,"checkIsClosed",()=>{this._loginWindow.closed?this.stop():this._timeoutId=setTimeout(this.checkIsClosed,200)}),n()(this,"_reset",()=>{this._promise=null,this._loginWindow=null,clearTimeout(this._timeoutId)}),this._requestBuilder=e,this._storage=t,this._reset()}_openWindow(e){const t=(window.screen.height-700-50)/2,r=(window.screen.width-750)/2,s=window.open(z?null:e,"HubLoginWindow","height=".concat(700,", width=").concat(750,", left=").concat(r,", top=").concat(t));return z&&setTimeout(()=>{s.location=e},0),s}async _load(){const e=await this._requestBuilder.prepareAuthRequest({request_credentials:"required",auth_mode:"bypass_to_login"},{nonRedirect:!0});return new Promise((t,r)=>{let s;this.reject=r;const o=()=>{s||(s=!0,i(),n(),this._loginWindow.close(),clearTimeout(this._timeoutId))},n=this._storage.onTokenChange(e=>{e&&(o(),t(e.accessToken))}),i=this._storage.onStateChange(e.stateId,e=>{e&&e.error&&(o(),r(new q.AuthError(e)))});null===this._loginWindow||!0===this._loginWindow.closed?this._loginWindow=this._openWindow(e.url):this._loginWindow.location=e.url,this.checkIsClosed()})}stop(){null!==this._loginWindow&&this._loginWindow.close(),this.reject&&this.reject("Authorization window closed"),this._reset()}authorize(){return null!==this._promise&&null!==this._loginWindow&&!0!==this._loginWindow.closed?(this._loginWindow.focus(),this._promise):(this._promise=this._load(),this._promise.then(this._reset,this._reset),this._promise)}},onBackendDown:function({onCheckAgain:e,translations:t}){return $(Object(s.jsx)(ee,{translations:t,onCheckAgain:async function r(o){o.stopPropagation();try{$("Connecting...",K.c.Type.LOADING),await e()}catch(e){$(Object(s.jsx)(ee,{translations:t,onCheckAgain:r}))}}})),()=>H.a.remove(X)}});var xe=ke;function Ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}class Ue extends c.PureComponent{constructor(...e){super(...e),n()(this,"state",{user:null,size:I.defaultProps.size,isLogoutPostponed:!1,isUserChangePostponed:!1}),n()(this,"login",async()=>{this.setState({loading:!0});try{await this.props.auth.login()}catch(e){}finally{this.setState({loading:!1})}}),n()(this,"logout",()=>this.props.auth.logout()),n()(this,"switchUser",()=>this.props.auth.switchUser()),n()(this,"onRevertPostponement",()=>{this.state.isLogoutPostponed&&this.props.auth.login(),this.state.isUserChangePostponed&&this.props.auth.updateUser()})}componentDidMount(){this.requestUser()}async requestUser(){try{const{auth:e}=this.props,t=await e.requestUser();this.checkUserCertificateMismatch(t),this.setState({user:t}),e.addListener("userChange",e=>{this.setState({user:e,isLogoutPostponed:!1,isUserChangePostponed:!1})}),e.addListener("logoutPostponed",()=>{this.setState({isLogoutPostponed:!0})}),e.addListener("changePostponed",()=>{this.setState({isUserChangePostponed:!0})})}catch(e){}}checkUserCertificateMismatch(e){var t;const{auth:r,translations:s}=this.props,o=r.http.getMetaForResponse(e);if(null!=o&&null!==(t=o.headers)&&void 0!==t&&t.has("x-client-certificate-token-mismatch")){const t=(null==s?void 0:s.certificateMismatch)||"You are authenticated as ".concat(e.login||e.name,'. To authenticate with the client certificate for your account, log out, then click the "Log in with certificate" option on the login page.');H.a.warning(t,0)}}render(){const{user:e,loading:t,isLogoutPostponed:r,isUserChangePostponed:o}=this.state,i=this.props,{auth:c,profileUrl:l}=i,h=a()(i,["auth","profileUrl"]),u=l||(e?"".concat(c.config.serverUri,"users/").concat(e.id):"");return Object(s.jsx)(I,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(r),!0).forEach((function(t){n()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({onLogin:this.login,onLogout:this.logout,onSwitchUser:this.switchUser,loading:t,user:e,profileUrl:u,showApplyChangedUser:o,showLogIn:r,showLogOut:!r,showSwitchUser:c._canShowDialogs()&&!r&&!o,onRevertPostponement:this.onRevertPostponement},h))}}n()(Ue,"propTypes",{auth:h.a.instanceOf(xe).isRequired,className:h.a.string,translations:h.a.object,profileUrl:h.a.string,size:I.propTypes.size,round:I.propTypes.round}),n()(Ue,"Size",I.Size);var Te=r("L9Op"),Ae=r("5x67"),Le="services__services--J_",De="services__item--3k",Ie="services__itemLogo--2t",Ne="services__activeItem--af services__item--3k services__active--5U",Re="services__line--2e",Fe="services__itemStacked--3m",Be="services__activeItemStacked--3l services__itemStacked--3m services__active--5U";function Me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function qe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(r),!0).forEach((function(t){n()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Me(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}class ze extends c.PureComponent{render(){const e=this.props,{service:t}=e,r=a()(e,["service"]);return Object(s.jsx)(W.a,qe(qe({target:"_self",href:t.homeUrl},r),{},{children:e=>t.iconUrl?[Object(s.jsx)("span",{className:Ie,style:{backgroundImage:"url(".concat(t.iconUrl,")")}},"icon"),Object(s.jsx)("div",{children:Object(s.jsx)(e,{children:t.name})},"text")]:Object(s.jsx)(e,{children:t.name})}))}}function He(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function Ke(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?He(Object(r),!0).forEach((function(t){n()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):He(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}n()(ze,"propTypes",{isActive:h.a.bool,service:h.a.shape({applicationName:h.a.string,iconUrl:h.a.string,homeUrl:h.a.string,name:h.a.string})});const We=e=>{const t=({active:t})=>Object(s.jsx)(x,{loader:e,active:t,icon:Te.default,"aria-label":"Services"});return t.propTypes={active:h.a.bool},t};class Ge extends c.PureComponent{constructor(...e){super(...e),n()(this,"serviceIsActive",e=>e.id===this.props.clientId)}render(){const e=this.props,{clientId:t,loading:r,services:o,initShown:n}=e,i=a()(e,["clientId","loading","services","initShown"]);if(!o)return Object(s.jsx)(x,Ke(Ke({},i),{},{loader:r,active:r,icon:Te.default,"aria-label":"Services"}));const c=[...o].sort(Ge.sort),l=c.filter(e=>e.iconUrl),h=c.filter(e=>!e.iconUrl),u=0!==l.length&&0!==h.length;return Object(s.jsx)(U.b,Ke(Ke({},i),{},{anchor:We(r),initShown:n,children:Object(s.jsxs)(Ae.a,{className:Le,top:-3,children:[l.map(e=>{const t=this.serviceIsActive(e);return Object(s.jsx)(Ge.Link,{active:t,className:t?Ne:De,service:e},e.id)}),u&&Object(s.jsx)("div",{className:Re},"separator"),h.map(e=>{const t=this.serviceIsActive(e);return Object(s.jsx)(Ge.Link,{active:t,className:t?Be:Fe,service:e},e.id)})]})}))}}function Ve(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function Je(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(r),!0).forEach((function(t){n()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ve(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ye(){}n()(Ge,"sort",(e,t)=>{const r=e.applicationName||"",s=t.applicationName||"";return r.localeCompare(s)||e.name.localeCompare(t.name)}),n()(Ge,"propTypes",{className:h.a.string,clientId:h.a.string,initShown:h.a.bool,loading:h.a.bool,onClick:h.a.func,services:h.a.arrayOf(ze.propTypes.service)}),n()(Ge,"Link",ze);class Qe extends c.Component{constructor(...e){super(...e),n()(this,"state",{visible:!0,loading:!1,services:null}),n()(this,"stopLoading",()=>{this.setState({loading:!1})}),n()(this,"getServicesContent",()=>{this.setState({loading:!0}),this.getServices(Qe.allFields).then(e=>{this.setState({services:e}),this.stopLoading()}).catch(this.stopLoading)})}componentDidMount(){const{auth:e}=this.props;this.http=new ae(e,e.getAPIPath()),this.getServices(Qe.countFields).then(e=>{e.length||this.setState({visible:!1})}).catch(Ye)}getServices(e){return this.http.get("services/header?fields=".concat(e))}render(){const{services:e,visible:t,loading:r}=this.state,o=this.props,{auth:n}=o,i=a()(o,["auth"]);return t?Object(s.jsx)(Ge,Je(Je({},i),{},{clientId:n.config.clientId,initShown:!0,loading:r,onClick:this.getServicesContent,services:e})):null}}function Ze(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function Xe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(r),!0).forEach((function(t){n()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ze(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}n()(Qe,"propTypes",{auth:h.a.instanceOf(xe).isRequired}),n()(Qe,"allFields","id,name,applicationName,homeUrl,iconUrl"),n()(Qe,"countFields","key");class $e extends c.Component{render(){const e=this.props,{children:t,className:r,spaced:o,theme:n}=e,i=a()(e,["children","className","spaced","theme"]),c=d()(f.header,f[n],r,{[f.headerSpaced]:o});return Object(s.jsx)("header",Xe(Xe({},i),{},{className:c,children:t}))}}n()($e,"propTypes",{theme:h.a.oneOf(["light","dark"]),className:h.a.string,children:h.a.node,spaced:h.a.bool}),n()($e,"defaultProps",{spaced:!0});var et=Object(b.c)(b.b.DARK)($e);Object(p.a)(Object(b.c)(b.b.DARK),g.a)($e);var tt=r("g9De"),rt=r("8j5u"),st=r("cwkg"),ot=r("QEaR"),nt=r("aq5q"),it=r("Z+s3"),at=r("WpNh"),ct=r("/m4v"),lt=r("F8qk"),ht=r("hSkc"),ut=r("0xkM"),dt=r("+17M"),pt=r("lKNH"),gt=r("fs2M"),bt=r("3gK6");const ft=Object(gt.V)(-42),Ot=Object(gt.V)(-1e3),jt={overview:{sakura:Object(pt.t)({}),classic:Object(bt.g)("/")},agents:{sakura:Object(pt.i)(),classic:Object(ht.getMainUIAgentsLink)()},changes:Object(bt.g)("/changes.html"),buildQueue:{sakura:Object(pt.v)(),classic:Object(bt.g)("/queue.html")},favoriteBuilds:Object(bt.g)("/favoriteBuilds.html"),investigations:Object(bt.g)("/investigations.html?init=1"),logout:Object(bt.g)("/ajax.html?logout=1"),login:Object(bt.g)("/login.html"),administration:Object(bt.g)("/admin/admin.html"),profile:Object(bt.g)("/profile.html?init=1"),search:Object(bt.g)("/searchResults.html?query=")};var mt=r("oY2a");const wt=[it.c.BOTTOM_LEFT],yt=()=>{var e;return null===(e=BS)||void 0===e?void 0:e.Logout(jt.logout)},_t=Object(at.a)(e=>[...e?[]:[{key:jt.profile,label:"Profile",href:jt.profile},{key:jt.favoriteBuilds,label:"Favorite Builds",href:jt.favoriteBuilds},{key:jt.investigations,label:"Investigations",href:jt.investigations}],{key:jt.logout,label:"Logout",href:"#",onClick:yt}]),vt=c.memo(()=>{const e=Object(ct.g)(e=>Object(ht.getCurrentUserId)(e)),t=Object(ct.g)(e=>Object(ht.getCurrentUserName)(e)),r=_t(ft===e);return e===Ot?Object(s.jsx)(k.a,{onClick:yt,className:mt.a.login,primary:!0,href:jt.login,children:"Log in..."}):Object(s.jsx)(U.b,{hoverMode:!0,className:d()(mt.a.text,mt.a.login),anchor:Object(s.jsx)(U.a,{className:mt.a.anchor,children:t}),children:Object(s.jsx)(T.a,{directions:wt,top:-12,data:r})})});vt.displayName="HeaderUserName";const Pt=({adminSpaceAvailable:e})=>Object(s.jsxs)(P,{className:d()(mt.a.tray,"header-tray"),id:"userPanel",children:[Object(s.jsx)("div",{className:d()(mt.a.headerModule1,mt.a.trayItem),id:"header-module-1",children:Object(s.jsx)("span",{className:"investigationsTicker"})}),Object(s.jsx)(rt.a,{placeId:tt.a.SAKURA_HEADER_USERNAME_BEFORE}),Object(s.jsx)(vt,{}),e&&Object(s.jsx)(x,{title:"Administration",href:jt.administration,icon:nt.default}),Object(s.jsx)(U.b,{anchor:Object(s.jsx)(x,{title:"Help",icon:ot.default}),hoverMode:!0,children:Object(s.jsx)(T.a,{directions:wt,data:dt.c})}),Object(s.jsx)(lt.a,{offset:!0,children:({measureRef:e,contentRect:t})=>{var r;return Object(s.jsxs)("div",{className:mt.a.rightWrapper,children:[Object(s.jsx)("div",{children:Object(s.jsx)(ut.a,{rightOffset:null===(r=t.offset)||void 0===r?void 0:r.width})}),Object(s.jsx)("div",{ref:e,children:Object(s.jsx)(rt.a,{placeId:tt.a.SAKURA_HEADER_RIGHT})})]})}}),Object(s.jsx)("span",{id:"header-ready",className:mt.a.headerReady})]});var kt=c.memo(Pt),Ct=r("zEQ/"),St=r("Jc3E"),xt=r("+iZW"),Et=r.n(xt),Ut=r("Y8eH"),Tt=r("VjDU"),At=r("Gids"),Lt={unit:"8px","main-color":"var(--ring-main-color)",mainColor:"var(--ring-main-color)","success-color":"var(--ring-success-color)",successColor:"var(--ring-success-color)","search-color":"var(--ring-search-color)",searchColor:"var(--ring-search-color)","warning-color":"var(--ring-warning-color)",warningColor:"var(--ring-warning-color)","dark-secondary-color":"var(--ring-dark-secondary-color)",darkSecondaryColor:"var(--ring-dark-secondary-color)",inactiveCircle:"ProgressBar-circle__inactiveCircle--1W",activeCircle:"ProgressBar-circle__activeCircle--xz",circleLoader:"ProgressBar-circle__circleLoader--1_",stopAnimation:"ProgressBar-circle__stopAnimation--ON",greenActive:"ProgressBar-circle__greenActive--3V",yellowActive:"ProgressBar-circle__yellowActive--sP",blueInactive:"ProgressBar-circle__blueInactive--3O"};const Dt=c.memo(({percent:e,size:t=16,stopAnimation:r=!1,activeCircleClassName:o,inactiveCircleClassName:n})=>{let i=e;(e<0||!e)&&(i=0),e>100&&(i=100);const a=t-4,c=a/2,l=(t-a)/2,h=c*Math.PI*2,u=h/100*i,p=t/2;return Object(s.jsxs)("svg",{className:Lt.circleProgressBar,height:t,width:t,viewBox:"0 0 ".concat(t," ").concat(t),children:[Object(s.jsx)("path",{className:d()(Lt.inactiveCircle,n),d:"M".concat(p," 1\n        a ").concat(t/2-1," ").concat(t/2-1," 0 0 1 0 ").concat(t-2,"\n        a ").concat(t/2-1," ").concat(t/2-1," 0 0 1 0 ").concat(-(t-2))}),Object(s.jsx)("path",{className:d()(Lt.activeCircle,!0===r&&Lt.stopAnimation,o),strokeDasharray:"".concat(u," ").concat(h-u),d:"M".concat(p," ").concat(l,"\n        a ").concat(c," ").concat(c," 0 0 1 0 ").concat(a,"\n        a ").concat(c," ").concat(c," 0 0 1 0 ").concat(-a)})]})});Dt.displayName="CircleProgressBar";var It=r("NDmR"),Nt=r("9OZg");function Rt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function Ft(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Rt(Object(r),!0).forEach((function(t){n()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Bt=e=>{let{to:t,children:r,mainUILink:o=!1}=e,n=a()(e,["to","children","mainUILink"]);const i=Object(ct.g)(e=>Object(ht.getIsExperimentalUI)(e));return c.useMemo(()=>i&&!o,[i,o])?Object(s.jsx)(It.b,Ft(Ft({"data-selected":n.active,to:t},n),{},{children:r})):Object(s.jsx)(Nt.a,Ft(Ft({supressConservative:!0,"data-selected":n.active,href:t},n),{},{children:r}))};var Mt=c.memo(Bt);const qt=e=>{var t,r;const s=(null===(t=BS)||void 0===t||null===(r=t.topNavPane)||void 0===r?void 0:r.getActiveTab)&&BS.topNavPane.getActiveTab()||null;return s&&s.myTabId===e||!1};var zt={unit:"8px","main-color":"var(--ring-main-color)",mainColor:"var(--ring-main-color)","text-color":"var(--ring-text-color)",textColor:"var(--ring-text-color)","icon-hover-color":"var(--ring-icon-hover-color)",iconHoverColor:"var(--ring-icon-hover-color)",postLink:"Links__postLink--1S",container:"Links__container--2M",counter:"Links__counter--36",progressPlaceholder:"Links__progressPlaceholder--H0",link:"Links__link--3R",projectsPopup:"Links__projectsPopup--3h",projectsPopupContainer:"Links__projectsPopupContainer--3v"};const Ht="There are no agents",Kt="All agents are busy",Wt="All agents are idle",Gt=()=>{const[e,t]=c.useState(null),{agentsNum:r=Object(Ct.a)().agents,freeAgentsNum:o}=null!=e?e:{},n=Object(ct.g)(ht.getIsSakuraSelected),i=Object(ct.g)(e=>Object(At.getCachedPlugins)(e,"SAKURA_CUSTOM_AGENTS_COUNTER").length>0),a=Object(Ut.l)()||qt("agents");c.useEffect(()=>window.GLOBAL_FETCH_DISABLED||i?()=>{}:Object(Tt.k)(e=>t(e)),[i]);const{agentsLoad:l,title:h}=c.useMemo(()=>((e=null,t=null)=>{let r=0,s=null==e||0===e?Ht:"There ".concat(e>1?"are":"is"," ").concat(null!=e?e:0," ").concat(Et()("agent",e));if(null!=e&&null!=t){const o=e-t;(o>0||t>0)&&(r=Math.round(100*o/e)),r<0&&(r=100);const n=t<0?0:t;0===e?s=Ht:0===n?s=Kt:n===e?s=Wt:(s="".concat(o+(o>1?" builds are":" build is")," running, "),s+="".concat(n+(n>1?" agents are":" agent is")," idle"))}return{agentsLoad:r,title:s}})(r,o),[r,o]),u=c.useMemo(()=>{if(i)return Object(s.jsx)(rt.a,{placeId:"SAKURA_CUSTOM_AGENTS_COUNTER",withoutLoader:!0});if(null==r)return Object(s.jsx)(St.a,{});const e=!isNaN(l)&&l>0;return Object(s.jsxs)(s.Fragment,{children:[e&&Object(s.jsx)(Dt,{percent:l||0,size:16})||null,Object(s.jsx)("span",{className:zt.counter,children:r}),!e&&Object(s.jsx)("span",{className:zt.progressPlaceholder})||null]})},[r,l,i]);return c.useMemo(()=>Object(s.jsxs)("div",{title:i?void 0:h,className:zt.container,children:[Object(s.jsx)(Mt,{active:a,mainUILink:!n,title:"Agents",to:n?jt.agents.sakura:jt.agents.classic,className:zt.link,children:"Agents"}),Object(s.jsx)("div",{className:zt.postLink,children:u})]}),[h,a,n,u,i])};var Vt=c.memo(Gt);const Jt=()=>{const e=qt("changes");return Object(s.jsx)("div",{className:zt.container,children:Object(s.jsx)(Mt,{mainUILink:!0,to:jt.changes,active:e,className:zt.link,title:"Changes",children:"Changes"})})};var Yt=c.memo(Jt),Qt=r("O4ZT");const Zt=()=>{const e=Object(ct.g)(ht.getIsSakuraSelected),t=c.useCallback(()=>Object(s.jsx)(w,{className:zt.logo,glyph:Qt.a}),[]);return Object(s.jsx)(Mt,{mainUILink:!e,to:e?jt.overview.sakura:jt.overview.classic,title:"Home",children:t})};var Xt=c.memo(Zt),$t=r("UFlA"),er=r("0VZu");const tr=()=>{const e=Object(ct.g)(ht.getIsSakuraSelected),t=Object(Ut.l)(),r=Object(ct.g)(ht.getIsExperimentalUI),o=c.useMemo(()=>r&&!t||qt("overview"),[t,r]);return Object(s.jsxs)("div",{className:zt.container,children:[Object(s.jsx)(Mt,{className:zt.link,mainUILink:!e,active:o,title:"Projects",to:e?jt.overview.sakura:jt.overview.classic,children:"Projects"}),!1===r&&Object(s.jsx)(er.a,{className:zt.projectsPopup,id:"allPopupImg",icon:$t.default})]})};var rr=c.memo(tr);const sr=()=>{const e=Object(ct.g)(ht.getIsSakuraSelected),[t,r]=c.useState(null),o=qt("queue"),{buildQueueSize:n=Object(Ct.a)().queue}=null!=t?t:{};c.useEffect(()=>{if(!window.GLOBAL_FETCH_DISABLED)return Object(Tt.k)(e=>r(e))},[]);const i=c.useMemo(()=>null==n?Object(s.jsx)(St.a,{}):Object(s.jsx)("span",{className:zt.counter,children:n}),[n]);return c.useMemo(()=>Object(s.jsxs)("div",{className:zt.container,children:[Object(s.jsx)(Mt,{active:o,mainUILink:!e,to:e?jt.buildQueue.sakura:jt.buildQueue.classic,className:zt.link,title:"Queue",children:"Queue"}),Object(s.jsx)("div",{className:zt.postLink,children:i})]}),[o,e,i])};var or=c.memo(sr);const nr=()=>Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(Xt,{}),Object(s.jsx)(rr,{}),Object(s.jsx)(Yt,{}),Object(s.jsx)(Vt,{}),Object(s.jsx)(or,{})]});var ir=c.memo(nr);function ar(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function cr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ar(Object(r),!0).forEach((function(t){n()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ar(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function lr(){}const hr=({adminSpaceAvailable:e=Object(Ct.a)().adminSpaceAvailable,onRender:t=lr})=>{const r=c.useCallback(e=>cr(cr({},e),{},{"--ring-text-color":"#bbb"}),[]);return c.useEffect(()=>{t()},[t]),Object(s.jsx)(st.default,{dark:!0,children:t=>Object(s.jsxs)(et,{style:r(t),className:d()("sakura-header",mt.a.container),children:[Object(s.jsx)(ir,{}),Object(s.jsx)(rt.a,{placeId:tt.a.SAKURA_HEADER_NAVIGATION_AFTER}),Object(s.jsx)(kt,{adminSpaceAvailable:e})]})})};t.default=c.memo(hr)},JVFt:function(e,t,r){"use strict";e.exports.generate=function(){for(var e=[],t=0;t<256;t++)e[t]=(t<16?"0":"")+t.toString(16);var r=4294967295*Math.random()|0,s=4294967295*Math.random()|0,o=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return e[255&r]+e[r>>8&255]+e[r>>16&255]+e[r>>24&255]+"-"+e[255&s]+e[s>>8&255]+"-"+e[s>>16&15|64]+e[s>>24&255]+"-"+e[63&o|128]+e[o>>8&255]+"-"+e[o>>16&255]+e[o>>24&255]+e[255&n]+e[n>>8&255]+e[n>>16&255]+e[n>>24&255]}},L9Op:function(e,t,r){"use strict";r.r(t);var s=r("OvAC"),o=r.n(s),n=r("oYCi"),i=r("mXGw");function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.default=i.memo((function(e){return Object(n.jsx)("svg",c(c({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 20 20"},e),{},{children:Object(n.jsx)("path",{d:"M1 19h4v-4H1zm7 0h4v-4H8zm7 0h4v-4h-4zM1 12h4V8H1zm7 0h4V8H8zm7 0h4V8h-4zM1 5h4V1H1zm7 0h4V1H8zm7-4v4h4V1z"})}))}))},O4ZT:function(e,t,r){"use strict";var s=r("OvAC"),o=r.n(s),n=r("oYCi"),i=r("mXGw");function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.a=i.memo((function(e){return Object(n.jsxs)("svg",c(c({xmlns:"http://www.w3.org/2000/svg",width:70,height:70,viewBox:"0 0 70 70"},e),{},{children:[Object(n.jsxs)("linearGradient",{id:"teamcity_svg__a",gradientUnits:"userSpaceOnUse",x1:1.774,y1:31.273,x2:40.166,y2:31.273,children:[Object(n.jsx)("stop",{offset:0,stopColor:"#905CFB"}),Object(n.jsx)("stop",{offset:.068,stopColor:"#776CF9"}),Object(n.jsx)("stop",{offset:.173,stopColor:"#5681F7"}),Object(n.jsx)("stop",{offset:.286,stopColor:"#3B92F5"}),Object(n.jsx)("stop",{offset:.41,stopColor:"#269FF4"}),Object(n.jsx)("stop",{offset:.547,stopColor:"#17A9F3"}),Object(n.jsx)("stop",{offset:.711,stopColor:"#0FAEF2"}),Object(n.jsx)("stop",{offset:.968,stopColor:"#0CB0F2"})]}),Object(n.jsx)("path",{d:"M39.7 47.9l-6.1-34c-.4-2.4-1.2-4.8-2.7-7.1-2-3.2-5.2-5.4-8.8-6.3C7.9-2.9-2.6 11.3 3.6 23.9l14.8 31.7c.4 1 1 2 1.7 2.9 1.2 1.6 2.8 2.8 4.7 3.4 9.6 3 17.3-5.5 14.9-14z",fill:"url(#teamcity_svg__a)"}),Object(n.jsxs)("linearGradient",{id:"teamcity_svg__b",gradientUnits:"userSpaceOnUse",x1:5.311,y1:9.669,x2:69.228,y2:43.866,children:[Object(n.jsx)("stop",{offset:0,stopColor:"#905CFB"}),Object(n.jsx)("stop",{offset:.068,stopColor:"#776CF9"}),Object(n.jsx)("stop",{offset:.173,stopColor:"#5681F7"}),Object(n.jsx)("stop",{offset:.286,stopColor:"#3B92F5"}),Object(n.jsx)("stop",{offset:.41,stopColor:"#269FF4"}),Object(n.jsx)("stop",{offset:.547,stopColor:"#17A9F3"}),Object(n.jsx)("stop",{offset:.711,stopColor:"#0FAEF2"}),Object(n.jsx)("stop",{offset:.968,stopColor:"#0CB0F2"})]}),Object(n.jsx)("path",{d:"M67.4 26.5c-1.4-2.2-3.4-3.9-5.7-4.9L25.5 1.7c-1-.5-2.1-1-3.3-1.3C6.7-3.2-4.4 13.8 5.5 27c1.5 2 3.6 3.6 6 4.5L48 47.9c.8.5 1.6.8 2.5 1.1 14 4.4 24.6-10.4 16.9-22.5z",fill:"url(#teamcity_svg__b)"}),Object(n.jsxs)("linearGradient",{id:"teamcity_svg__c",gradientUnits:"userSpaceOnUse",x1:-19.284,y1:70.82,x2:55.983,y2:33.186,children:[Object(n.jsx)("stop",{offset:0,stopColor:"#3BEA62"}),Object(n.jsx)("stop",{offset:.117,stopColor:"#31DE80"}),Object(n.jsx)("stop",{offset:.302,stopColor:"#24CEA8"}),Object(n.jsx)("stop",{offset:.484,stopColor:"#1AC1C9"}),Object(n.jsx)("stop",{offset:.659,stopColor:"#12B7DF"}),Object(n.jsx)("stop",{offset:.824,stopColor:"#0EB2ED"}),Object(n.jsx)("stop",{offset:.968,stopColor:"#0CB0F2"})]}),Object(n.jsx)("path",{d:"M67.4 26.5c-1.8-2.8-4.6-4.8-7.9-5.6-3.5-.8-6.8-.5-9.6.7L11.4 36.1s-.2.1-.6.4C.9 40.4-4 53.3 4 64c1.8 2.4 4.3 4.2 7.1 5 5.3 1.6 10.1 1 14-1.1h.1l37.6-20.1.1-.1c6.6-3.8 9.7-13.1 4.5-21.2z",fill:"url(#teamcity_svg__c)"}),Object(n.jsxs)("linearGradient",{id:"teamcity_svg__d",gradientUnits:"userSpaceOnUse",x1:38.944,y1:5.85,x2:5.423,y2:77.509,children:[Object(n.jsx)("stop",{offset:0,stopColor:"#3BEA62"}),Object(n.jsx)("stop",{offset:.094,stopColor:"#2FDB87"}),Object(n.jsx)("stop",{offset:.196,stopColor:"#24CEA8"}),Object(n.jsx)("stop",{offset:.306,stopColor:"#1BC3C3"}),Object(n.jsx)("stop",{offset:.426,stopColor:"#14BAD8"}),Object(n.jsx)("stop",{offset:.56,stopColor:"#10B5E7"}),Object(n.jsx)("stop",{offset:.719,stopColor:"#0DB1EF"}),Object(n.jsx)("stop",{offset:.968,stopColor:"#0CB0F2"})]}),Object(n.jsx)("path",{d:"M50.3 12.8c1.2-2.7 1.1-6-.9-9C48.3 2 46.5.8 44.5.3c-4.5-1.1-8.3 1-10.1 4.2L3.5 42v.1C-.9 47.9-1.6 56.5 4 64c1.8 2.4 4.3 4.2 7.1 5 10.5 3.3 19.3-2.5 22.1-10.8l17.1-45.4z",fill:"url(#teamcity_svg__d)"}),Object(n.jsx)("path",{d:"M13.4 13.4h43.2v43.2H13.4z"}),Object(n.jsx)("path",{fill:"#FFF",d:"M17.5 48.5h16.2v2.7H17.5zM22.9 22.7h-5.4v-3.6h14.8v3.6h-5.5V37h-3.9zM32.5 28.1c0-5.1 3.8-9.3 9.3-9.3 3.4 0 5.4 1.1 7.1 2.8l-2.5 2.9c-1.4-1.3-2.8-2-4.6-2-3 0-5.2 2.5-5.2 5.6V28c0 3.1 2.1 5.6 5.2 5.6 2 0 3.3-.8 4.7-2.1L49 34c-1.8 2-3.9 3.2-7.3 3.2-5.3.1-9.2-4-9.2-9.1"})]}))}))},"RA+P":function(e,t,r){e.exports=r("JVFt")},UFlA:function(e,t,r){"use strict";r.r(t);var s=r("OvAC"),o=r.n(s),n=r("oYCi"),i=r("mXGw");function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.default=i.memo((function(e){return Object(n.jsx)("svg",c(c({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,viewBox:"0 0 16 16"},e),{},{children:Object(n.jsx)("path",{d:"M8 10.99L3.5 6.5l1-1L8 9.01l3.51-3.51.98 1L8 10.99z"})}))}))},aq5q:function(e,t,r){"use strict";r.r(t);var s=r("OvAC"),o=r.n(s),n=r("oYCi"),i=r("mXGw");function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.default=i.memo((function(e){return Object(n.jsx)("svg",c(c({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 20 20"},e),{},{children:Object(n.jsx)("path",{d:"M15 1.11H5L0 10l5 8.89h10L20 10zm-5 12.75A3.86 3.86 0 1113.86 10 3.86 3.86 0 0110 13.86z"})}))}))},cwkg:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return c}));var s=r("oYCi"),o=r("Zif8"),n=r("9LZH"),i=r("fV86"),a=r("LuBn");function c({dark:e,children:t,passToPopups:r}){const c=e?i.a:void 0,l=e?n.b.DARK:n.b.LIGHT;return!0===r?Object(s.jsx)(a.a,{id:"popups-with-theme",className:o.a.popupTarget,children:e=>Object(s.jsx)(n.a.Provider,{value:l,children:Object(s.jsxs)(s.Fragment,{children:[t(c),Object(s.jsx)("div",{style:c,children:e})]})})}):Object(s.jsx)(n.a.Provider,{value:l,children:t(c)})}},fV86:function(e,t,r){"use strict";t.a={"--ring-line-color":"#475159","--ring-borders-color":"#406380","--ring-icon-color":"#80929d","--ring-icon-secondary-color":"#80929d","--ring-border-disabled-color":"#475159","--ring-border-hover-color":"#70b1e6","--ring-icon-error-color":"#c22731","--ring-icon-warning-color":"#cc8b00","--ring-icon-success-color":"#1c8c32","--ring-popup-border-components":"0, 42, 76","--ring-popup-border-color":"rgba(var(--ring-popup-border-components), 0.1)","--ring-popup-shadow-color":"rgba(var(--ring-popup-border-components), 0.15)","--ring-message-shadow-color":"rgba(var(--ring-popup-border-components), 0.3)","--ring-pinned-shadow-color":"#000","--ring-hint-color":"#80929d","--ring-link-color":"#70b1e6","--ring-error-color":"#db5860","--ring-warning-color":"#eda200","--ring-success-color":"#59a869","--ring-text-color":"#bbb","--ring-heading-color":"var(--ring-text-color)","--ring-secondary-color":"#80929d","--ring-disabled-color":"#80929d","--ring-content-background-color":"#23272b","--ring-popup-background-color":"#111314","--ring-sidebar-background-color":"#28343d","--ring-selected-background-color":"#062640","--ring-hover-background-color":"#0b1a26","--ring-message-background-color":"var(--ring-popup-background-color)","--ring-navigation-background-color":"#111314","--ring-tag-background-color":"#3e4d59","--ring-removed-background-color":"#8f5247","--ring-warning-background-color":"#593d01","--ring-added-background-color":"#365947","--ring-code-background-color":"#2b2b2b","--ring-code-color":"#a9b7c6","--ring-code-meta-color":"#bbb529","--ring-code-keyword-color":"#cc7832","--ring-code-tag-background-color":"#2b2b2b","--ring-code-tag-color":"#e8BF6a","--ring-code-tag-font-weight":"normal","--ring-code-field-color":"#9876aa","--ring-code-attribute-color":"#bababa","--ring-code-number-color":"#6897bb","--ring-code-string-color":"#6a8759","--ring-code-addition-color":"#447152","--ring-code-deletion-color":"#656e76"}}}]);